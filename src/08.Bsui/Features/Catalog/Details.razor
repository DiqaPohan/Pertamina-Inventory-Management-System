@page "/Catalog/Details/{id}/{id1}"
@attribute [Authorize]

<BrowserTabTitle>@DisplayTextFor.DetailCatalog</BrowserTabTitle>
<MudBreadcrumbs Items="_breadcrumbItems"></MudBreadcrumbs>
<ErrorViewer Error="_error" />
<Loading IsVisible="_isLoading" />
<AuthorizeView Context="authorizeContext">
    <Authorized>
        @if (@authorizeContext.User.GetCompanyCode() == "2186")
        {
            @if (_dataCount is not null)
            {
                <MudCard Outlined="true">
                    <MudCardHeader>
                        <CardHeaderContent>
                            <MudText Typo="Typo.body1" Align="Align.Center"> @Id - @Id1 </MudText>
                        </CardHeaderContent>
                    </MudCardHeader>
                    <MudCardContent>
                        <MudGrid>
                            <MudItem xs="12">
                                <MudCard Outlined="true" Square="true" Class="border-solid border-2">
                                    <MudCardHeader>
                                        <CardHeaderContent>
                                            <MudText Typo="Typo.body1" Align="Align.Center">  Legend </MudText>
                                        </CardHeaderContent>
                                    </MudCardHeader>
                                    <MudCardContent>
                                        <MudGrid>
                                            <MudItem xs="4">
                                                <MudChip Class="border-solid border-2 d-flex align-center justify-center mud-width-full" style="background-color: #1E88E5; color:white;">PERSERO -> HOLDING</MudChip>
                                            </MudItem>
                                            <MudItem xs="4">
                                                <MudChip Class="border-solid border-2 d-flex align-center justify-center mud-width-full" style="background-color: #66BB6A; color:white;">HEAD OFFICE -> KPI HO</MudChip>
                                            </MudItem>
                                            <MudItem xs="4">
                                                <MudChip Class="border-solid border-2 d-flex align-center justify-center mud-width-full" style="background-color: indianred; color:white;">RU -> KPI RU</MudChip>
                                            </MudItem>
                                        </MudGrid>

                                    </MudCardContent>
                                </MudCard>
                            </MudItem>
                            <MudItem xs="12">
                                <MudGrid>
                                    @foreach (var subproduct in _dataCount.Items)
                                    {
                                        @if (subproduct.Application_Area is not null)
                                        {
                                            @if (subproduct.Application_Area.ToLower().Contains("persero"))
                                            {
                                                <MudItem xs="3" @onclick="(() => ShowDialog(subproduct.Application_Name,subproduct.Capability_Level_1))">
                                                    <MudChip Class="border-solid border-2 d-flex align-center justify-center mud-width-full" style="background-color: #1E88E5; color:white;">@subproduct.Application_Name</MudChip>
                                                </MudItem>
                                            }
                                            else if (subproduct.Application_Area.ToLower().Contains("head office"))
                                            {
                                                <MudItem xs="3" @onclick="(() => ShowDialog(subproduct.Application_Name,subproduct.Capability_Level_1))">
                                                    <MudChip Class="border-solid border-2 d-flex align-center justify-center mud-width-full" style="background-color: #66BB6A; color:white;">@subproduct.Application_Name</MudChip>
                                                </MudItem>
                                            }
                                            else
                                            {
                                                <MudItem xs="3" @onclick="(() => ShowDialog(subproduct.Application_Name,subproduct.Capability_Level_1))">
                                                    <MudChip Class="border-solid border-2 d-flex align-center justify-center mud-width-full" style="background-color: indianred; color:white;">@subproduct.Application_Name</MudChip>
                                                </MudItem>
                                            }
                                        }

                                    }
                                </MudGrid>

                            </MudItem>
                        </MudGrid>
                    </MudCardContent>
                </MudCard>
            }

        }
        else
        {
            <div class="d-flex justify-space-around mt-16">
                <div>
                    <MudText Typo="Typo.h2">Kode Perusahaan tidak terdaftar</MudText>
                    <MudText Typo="Typo.body1">Aplikasi ini hanya bisa di akses untuk user dari KPI (Kilang Pertamina Indonesia)</MudText>
                </div>
                <div>
                    <img src="img/unauthorized.png" alt="Unauthorized" width="300" />
                </div>
            </div>
        }
     </Authorized>
</AuthorizeView>


